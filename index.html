<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steel Global - Explore</title>
    <!-- Favicon as requested: Parent brand 'steel' -->
    <link rel="icon" type="image/png" href="assets/logos/Steel Logo - Transparent.png">

    <link rel="stylesheet" href="styles.css">

    <!-- Fonts: Outfit for a modern, clean, tech/industrial feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@200;300;400;600&display=swap" rel="stylesheet">
</head>

<body>
    <!-- Top Left Logo Container -->
    <div class="logo-container">
        <!-- Logo requested: Steel Global Logo. -->
        <img src="assets/logos/STEEL GLOBAL - Transparent.png" alt="Steel Global" class="brand-logo img-protected"
            draggable="false">
    </div>

    <!-- Main 3D Viewport -->
    <div id="viewport">
        <!-- Background Layer (Phase 7: Destination State) -->
        <div id="background-layer">
            <!-- Business World: Animated Gradient -->
            <div id="world-business" class="world-layer">
                <div class="blob blob-1"></div>
                <div class="blob blob-2"></div>
                <div class="blob blob-3"></div>
                <div class="blob blob-4"></div>
            </div>
        </div>

        <!-- The Universe: The container that moves around the camera -->
        <div id="universe">

            <!-- The Nebula / Fog Layer -->
            <div id="nebula"></div>

            <!-- Shooting Stars Layer (Background 2D) -->
            <!-- NEXUS COMPONENT: Permanent background feature -->
            <svg id="shooting-stars" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="star-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color: rgba(255, 255, 255, 0); stop-opacity: 0" />
                        <stop offset="100%" style="stop-color: #FFD700; stop-opacity: 1" />
                    </linearGradient>
                </defs>
            </svg>

            <!-- Center / Title -->
            <div class="explore-item" data-x="0" data-y="0" data-z="0">
                <h1 class="main-title">STEEL<br>GLOBAL</h1>
                <p class="tagline">Curating the Unimagined</p>
            </div>

            <!-- 'The Infinite Sky' Topics scattered in 3D space -->

            <!-- Business: Mid Right, somewhat far (-500) -->
            <div class="explore-item topic" data-x="400" data-y="-100" data-z="-500">
                <span class="topic-label">Business</span>
            </div>

            <!-- Design: Close, Bottom Left (-200) -->
            <div class="explore-item topic" data-x="-300" data-y="200" data-z="-200">
                <span class="topic-label">Design</span>
            </div>

            <!-- Culture: Far Back Left (-1500) -->
            <div class="explore-item topic" data-x="-500" data-y="-300" data-z="-1500">
                <span class="topic-label">Culture</span>
            </div>

            <!-- Populating More -->

            <!-- Photography: Top Right, Deep (-1800) -->
            <div class="explore-item topic" data-x="600" data-y="-400" data-z="-1800">
                <span class="topic-label">Photography</span>
            </div>

            <!-- Motion Graphics: Bottom Right, Very Close (-100) - almost in face -->
            <div class="explore-item topic" data-x="350" data-y="300" data-z="-100">
                <span class="topic-label">Motion Graphics</span>
            </div>

            <!-- Videography: Mid Left, Medium (-800) -->
            <div class="explore-item topic" data-x="-600" data-y="0" data-z="-800">
                <span class="topic-label">Videography</span>
            </div>

            <!-- AI: Top Left, Very Deep (-3000) -->
            <div class="explore-item topic" data-x="-800" data-y="-600" data-z="-3000">
                <span class="topic-label">AI</span>
            </div>

            <!-- Futurism: Bottom Center, Deep (-2500) -->
            <div class="explore-item topic" data-x="0" data-y="500" data-z="-2500">
                <span class="topic-label">Futurism</span>
            </div>

            <!-- Modernism: Top Center, Mid (-1200) -->
            <div class="explore-item topic" data-x="0" data-y="-500" data-z="-1200">
                <span class="topic-label">Modernism</span>
            </div>

            <!-- Charity: Far Right, Deep (-2200) -->
            <div class="explore-item topic" data-x="900" data-y="100" data-z="-2200">
                <span class="topic-label">Charity</span>
            </div>

            <!-- Steel Cinema: Far Left, Deep (-1600) -->
            <div class="explore-item topic" data-x="-700" data-y="200" data-z="-1600">
                <span class="topic-label">Steel Cinema</span>
            </div>

            <!-- Sonic Arts: Bottom Left, Deep (-2800) -->
            <div class="explore-item topic" data-x="-400" data-y="700" data-z="-2800">
                <span class="topic-label">Sonic Arts</span>
            </div>

            <!-- Fashion: Top Right, Mid-Deep (-1400) -->
            <div class="explore-item topic" data-x="500" data-y="-200" data-z="-1400">
                <span class="topic-label">Fashion</span>
            </div>

            <!-- STEEL CARD: Center Left, Close-ish (-400) -->
            <div class="explore-item topic" data-x="-400" data-y="-100" data-z="-400">
                <span class="topic-label">STEEL CARD</span>
            </div>

            <!-- Ventures: Center Right, Deep (-2000) -->
            <div class="explore-item topic" data-x="400" data-y="-50" data-z="-2000">
                <span class="topic-label">Ventures</span>
            </div>

            <!-- Extra "Stars" for depth context -->
            <div class="star" style="--x: 800px; --y: -500px; --z: -2000px;"></div>
            <div class="star" style="--x: -600px; --y: 600px; --z: -1000px;"></div>
            <div class="star" style="--x: 200px; --y: 300px; --z: -3000px;"></div>
            <div class="star" style="--x: -900px; --y: -400px; --z: -1500px;"></div>
            <div class="star" style="--x: 500px; --y: 700px; --z: -2500px;"></div>
            <div class="star" style="--x: 0px; --y: -800px; --z: -3500px;"></div>

        </div>
    </div>

    <!-- Ambient background element -->
    <div class="ambient-glow"></div>

    <script>
        // --- The Universe Engine ---
        const universe = document.getElementById('universe');
        const items = document.querySelectorAll('.explore-item');
        const backgroundLayer = document.getElementById('background-layer');

        // State
        let currentX = 0;
        let currentY = 0;
        let currentZ = 0;
        let activeWorld = null; // Track current active world

        // 1. Initial Setup: Position everything visually
        items.forEach(item => {
            const x = parseInt(item.dataset.x);
            const y = parseInt(item.dataset.y);
            const z = parseInt(item.dataset.z);

            // Random Rotation for topics only, not the main title
            let rotX = 0;
            let rotY = 0;
            let rotZ = 0;

            if (item.classList.contains('topic')) {
                // Random Rotation for "Floating in Space" feel
                rotX = (Math.random() * 20) - 10; // -10 to 10 deg
                rotY = (Math.random() * 20) - 10;
                rotZ = (Math.random() * 10) - 5;  // Subtle Z tilt
            }

            // Depth Fading Logic
            // If deeper than -2000, fade out. scale min opacity to 0.3
            let opacity = 1;
            if (z < -2000) {
                // Map -2000 -> 1, -4000 -> 0.3
                const depth = Math.abs(z);
                opacity = 1 - ((depth - 2000) / 3000);
                if (opacity < 0.3) opacity = 0.3;
            }
            item.style.opacity = opacity;


            // Apply coordinates directly to the element
            item.style.transform = `translate3d(${x}px, ${y}px, ${z}px) rotateX(${rotX}deg) rotateY(${rotY}deg) rotateZ(${rotZ}deg)`;

            // Store original random rotation to re-apply it if needed (optional, simplistic for now)
            item.dataset.rotX = rotX;
            item.dataset.rotY = rotY;
            item.dataset.rotZ = rotZ;
        });

        // 2. Parallax / Mouse Look (Subtle drift)
        document.addEventListener('mousemove', (e) => {
            // Only apply subtle drift if not warping (optional, but cleaner)
            const xPct = (e.clientX / window.innerWidth) - 0.5;
            const yPct = (e.clientY / window.innerHeight) - 0.5;

            // Rotate the entire universe slightly based on mouse
            // We use rotateY and rotateX for that "looking around" feel
            const rotX = -yPct * 5; // deg
            const rotY = xPct * 5; // deg

            // Note: We combine this with the current translation
            universe.style.transform = `
                translate3d(${currentX}px, ${currentY}px, ${currentZ}px) 
                rotateX(${rotX}deg) 
                rotateY(${rotY}deg)
            `;
        });

        // 3. The Warp Drive (Navigation)
        document.querySelectorAll('.topic').forEach(topic => {
            topic.addEventListener('click', (e) => {
                const topicName = topic.innerText.trim(); // Get topic name
                console.log('Clicked topic:', topicName, topic.dataset); // DEBUG

                // Get destination coordinates
                // We want to move the UNIVERSE so that the target item ends up at (0,0,0) or slightly offset
                // So Universe Translation = -1 * Item Position

                const targetX = -parseInt(topic.dataset.x);
                const targetY = -parseInt(topic.dataset.y);
                const targetZ = -parseInt(topic.dataset.z);

                console.log('Target coordinates:', { targetX, targetY, targetZ }); // DEBUG

                // Update state
                currentX = targetX;
                currentY = targetY;
                // Add a small offset to Z so we don't clip INSIDE the text, maybe stop 50px in front
                currentZ = targetZ + 100;

                // Apply the Warp
                // The CSS transition handles the animation timing (cubic-bezier)
                universe.style.transform = `
                    translate3d(${currentX}px, ${currentY}px, ${currentZ}px) 
                    rotateX(0deg) 
                    rotateY(0deg)
                `;

                // --- Visual Hierarchy: Dim Others ---
                items.forEach(el => {
                    if (el === topic) {
                        el.classList.remove('dimmed');
                        el.classList.add('active');
                    } else {
                        el.classList.add('dimmed');
                        el.classList.remove('active');
                    }
                });

                // Optional: Add a class to indicate "arrived" state for styling changes
                document.body.classList.add('warping');

                // --- Destination State Controller ---
                // Wait for warp to almost finish (2.0s transition -> trigger at 2.0s)
                setTimeout(() => {
                    document.body.classList.remove('warping');
                    document.body.classList.add('at-destination');

                    // Activate specific World
                    if (topicName === 'Business') {
                        activateWorld('world-business');
                    } else {
                        // Default galaxy or clear? For now clear.
                        clearWorlds();
                    }

                }, 2000); // Match transition duration (2.0s delay + 0.5s fade in CSS)
            });
        });

        // Helper: Activate a world
        function activateWorld(worldId) {
            clearWorlds(); // Clear existing
            const worldIds = document.getElementById(worldId);
            if (worldIds) {
                // Small delay to ensure smooth transition start
                setTimeout(() => {
                    worldIds.classList.add('active');
                    activeWorld = worldId;
                }, 100);
            }
        }

        // Helper: Clear all worlds
        function clearWorlds() {
            document.querySelectorAll('.world-layer').forEach(layer => {
                layer.classList.remove('active');
            });
            activeWorld = null;
        }

        // Reset view helper
        function resetToNexus() {
            currentX = 0;
            currentY = 0;
            currentZ = 0;
            universe.style.transform = `translate3d(0,0,0)`;
            document.body.classList.remove('at-destination');

            // Restore Opacity
            items.forEach(el => {
                el.classList.remove('dimmed');
                el.classList.remove('active');
            });

            // Clear World Backgrounds
            clearWorlds();
        }

        // Reset view when clicking Main Title (Home)
        document.querySelector('.main-title').addEventListener('click', () => {
            resetToNexus();
        });

        // Background Controller: Return to Nexus on Void Click
        backgroundLayer.addEventListener('click', (e) => {
            // Only trigger if clicking the background itself (or active world layer), not bubbleing up from something else?
            // Since background is behind everything (-5), only clicks that MISS topics will hit it?
            // Actually, topics are in universe (z=10). Universe has pointer-events: none.
            // Items have pointer-events: auto.
            // So if you click a topic, it hits topic. If you click empty space, it hits universe (through) -> viewport (through?) -> backgroundLayer.
            // Ensure backgroundLayer has pointer-events: auto.

            console.log('Background clicked -> Returning to Nexus');
            resetToNexus();
        });


        // Image Protection
        document.querySelectorAll('.img-protected').forEach(img => {
            img.addEventListener('contextmenu', e => e.preventDefault());
            img.addEventListener('dragstart', e => e.preventDefault());
        });

    </script>

    <!-- Shooting Stars Engine -->
    <script>
        (function () {
            const svg = document.getElementById('shooting-stars');
            const width = window.innerWidth;
            const height = window.innerHeight;

            const minSpeed = 10;
            const maxSpeed = 30;
            const minDelay = 1200;
            const maxDelay = 4200;
            const starWidth = 10;
            const starHeight = 1; // Thin trail

            function getRandomStartPoint() {
                const side = Math.floor(Math.random() * 4);
                const offset = Math.random() * window.innerWidth;
                const hOffset = Math.random() * window.innerHeight;

                switch (side) {
                    case 0: // Top
                        return { x: offset, y: 0, angle: 45 };
                    case 1: // Right
                        return { x: window.innerWidth, y: hOffset, angle: 135 };
                    case 2: // Bottom
                        return { x: offset, y: window.innerHeight, angle: 225 };
                    case 3: // Left
                        return { x: 0, y: hOffset, angle: 315 };
                    default:
                        return { x: 0, y: 0, angle: 45 };
                }
            }

            function createStar() {
                const { x, y, angle } = getRandomStartPoint();
                const star = {
                    x,
                    y,
                    angle,
                    scale: 1,
                    speed: Math.random() * (maxSpeed - minSpeed) + minSpeed,
                    distance: 0,
                    element: null
                };

                // Create SVG Rect
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute("fill", "url(#star-gradient)");
                rect.setAttribute("height", starHeight);
                rect.setAttribute("width", starWidth); // Initial width
                svg.appendChild(rect);
                star.element = rect;

                // Animation Frame
                function move() {
                    // Update physics
                    star.x += star.speed * Math.cos((star.angle * Math.PI) / 180);
                    star.y += star.speed * Math.sin((star.angle * Math.PI) / 180);
                    star.distance += star.speed;
                    star.scale = 1 + (star.distance / 100);

                    // Check bounds (with buffer)
                    if (
                        star.x < -100 ||
                        star.x > window.innerWidth + 100 ||
                        star.y < -100 ||
                        star.y > window.innerHeight + 100
                    ) {
                        try { svg.removeChild(rect); } catch (e) { }
                        return; // Stop animation
                    }

                    // Update DOM
                    // Transform: rotate around center
                    // We calculate center based on current width (which is base * scale)
                    const currentWidth = starWidth * star.scale;

                    rect.setAttribute("x", star.x);
                    rect.setAttribute("y", star.y);
                    rect.setAttribute("width", currentWidth);

                    // Rotation requires specific center
                    const cx = star.x + (currentWidth / 2);
                    const cy = star.y + (starHeight / 2);
                    rect.setAttribute("transform", `rotate(${star.angle}, ${cx}, ${cy})`);

                    requestAnimationFrame(move);
                }

                requestAnimationFrame(move);

                // Schedule next star
                setTimeout(createStar, Math.random() * (maxDelay - minDelay) + minDelay);
            }

            // Start the loop
            createStar();
        })();
    </script>
</body>

</html>